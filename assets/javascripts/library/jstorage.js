(function(a){function b(){var a=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),a=!0,window.localStorage.removeItem("_tmptest")}catch(b){}if(a)try{window.localStorage&&(g=window.localStorage,l="localStorage")}catch(d){}else if("globalStorage"in window)try{window.globalStorage&&(g=window.globalStorage[window.location.hostname],l="globalStorage")}catch(e){}else{h=document.createElement("link");if(!h.addBehavior){h=null;return}h.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(h),h.load("jStorage");var f="{}";try{f=h.getAttribute("jStorage")}catch(i){}g.jStorage=f,l="userDataBehavior"}c()}function c(){if(g.jStorage)try{f=k(String(g.jStorage))}catch(a){g.jStorage="{}"}else g.jStorage="{}";i=g.jStorage?String(g.jStorage).length:0}function d(){try{g.jStorage=j(f),h&&(h.setAttribute("jStorage",g.jStorage),h.save("jStorage")),i=g.jStorage?String(g.jStorage).length:0}catch(a){}}function e(a){if(!a||typeof a!="string"&&typeof a!="number")throw new TypeError("Key name must be string or numeric");return!0}if(!a||!(a.toJSON||Object.toJSON||window.JSON))throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");var f={},g={jStorage:"{}"},h=null,i=0,j=a.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),k=a.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(a){return String(a).evalJSON()},l=!1,m={isXML:function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1},encode:function(a){if(!this.isXML(a))return!1;try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(c){}}return!1},decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b},c;return b?(c=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml"),this.isXML(c)?c:!1):!1}};a.jStorage={version:"0.1.5.3",set:function(a,b){return e(a),m.isXML(b)&&(b={_is_xml:!0,xml:m.encode(b)}),f[a]=b,d(),b},get:function(a,b){return e(a),a in f?f[a]&&typeof f[a]=="object"&&f[a]._is_xml&&f[a]._is_xml?m.decode(f[a].xml):f[a]:typeof b=="undefined"?null:b},deleteKey:function(a){return e(a),a in f?(delete f[a],d(),!0):!1},flush:function(){return f={},d(),!0},storageObj:function(){function a(){}return a.prototype=f,new a},index:function(){var a=[],b;for(b in f)f.hasOwnProperty(b)&&a.push(b);return a},storageSize:function(){return i},currentBackend:function(){return l},storageAvailable:function(){return!!l},reInit:function(){var a,b;if(h&&h.addBehavior){a=document.createElement("link"),h.parentNode.replaceChild(a,h),h=a,h.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(h),h.load("jStorage"),b="{}";try{b=h.getAttribute("jStorage")}catch(d){}g.jStorage=b,l="userDataBehavior"}c()}},b()})(window.jQuery||window.$);