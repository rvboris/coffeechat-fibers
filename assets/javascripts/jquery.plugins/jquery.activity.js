(function(a,b){function c(){return(new Date).getTime()}a.activity={defaults:{lastActive:c(),inactive:18e5,interval:3e5,inactiveFn:function(){},intervalFn:function(){}},timer:b,now:c,init:function(b){var d=this;return d.defaults=a.extend(d.defaults,b||{}),d.defaults.lastActive=c(),d.bind(),d.timer=setInterval(function(){d.check()},d.defaults.interval)},update:function(a){return this.defaults.lastActive=a===b?c():a},isActive:function(){return this.timer!==b},getActivity:function(){var a=this,b=c();return{diff:b-a.defaults.lastActive,time:b,lastActive:a.defaults.lastActive}},reActivate:function(a){var b=this;return b.timer&&(b.timer=clearInterval(b.timer)),b.init(a||{})},check:function(){var a=this,b=c(),d=b-a.defaults.lastActive;return d>a.defaults.inactive?(a.defaults.inactiveFn.call(a,{diff:d,time:b,lastActive:a.defaults.lastActive}),a.timer=clearInterval(a.timer)):(d>a.defaults.interval&&a.defaults.intervalFn.call(a,{diff:d,time:b,lastActive:a.defaults.lastActive}),a.bind())},bind:function(){var b=this;return a(window).unbind(".activity").one("mousemove.activity keyup.activity",function(a){b.defaults.lastActive=a.timeStamp}),b}}})(jQuery);